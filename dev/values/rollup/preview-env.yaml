
# Intended to be used with ArgoCD Pull-Request Preview Environment
# This values files provided overrides that can be utilized by the ArgoCD ApplicationSet Manifest
# These overrides assume that the manifest will deploy a helm chart with the following values files in this order:
#
#   - dev.yml
#   - preview-env.yml
# 
# The generated helm chart may be incorrect if the values files are provided in the wrong order.

global: 
  namespaceOverride: pr-{{.number}}
  sequencerGrpc: http://node0-sequencer-grpc-service.pr-{{.number}}.svc.cluster.local:8080
  sequencerRpc: http://node0-sequencer-rpc-service.pr-{{.number}}.svc.cluster.local:26657


evm-faucet:
  ingress:
    hostname: faucet.pr-{{.number}}.dev.astria.org


evm-rollup:
  config:
   celestia:
    rpc: http://celestia-service.pr-{{.number}}.svc.cluster.local:26658
    token: http://celestia-service.pr-{{.number}}.svc.cluster.local:5353
  images: 
    composer: 
      devTag: pr-{{.number}}
    conductor: 
      devTag: pr-{{.number}}
  ingress:
    hostname: pr-{{.number}}.dev.astria.org
  resources:
    conductor: 
      requests:
        cpu: "0.1"
        memory: 100Mi
      limits:
        cpu: "1"
        memory: 200Mi
  storage:
    enabled: false
    local: false
    entities:
      rollupSharedStorage:
        size: "1Gi"
        storageClassName: standard-rwo
        persistentVolumeName: "rollup-shared-storage"
        path: "/data/rollup-data"


postgresql:
  enabled: false


blockscout-stack:
  enabled: false
  blockscout:
    extraEnv:
      - name: DATABASE_URL
        value: "postgres://postgres:bigsecretpassword@astria-chain-chart-blockscout-postegres.pr-{{.number}}.svc.cluster.local:5432/blockscout"
      - name: ETHEREUM_JSONRPC_HTTP_URL
        value: "http://astria-evm-service.pr-{{.number}}.svc.cluster.local:8545/"
      - name: ETHEREUM_JSONRPC_WS_URL
        value: "ws://astria-evm-service.pr-{{.number}}.svc.cluster.local:8546/"
    ingress:
      hostname: explorer.pr-{{.number}}.dev.astria.org
  frontend:
    ingress:
      hostname: explorer.pr-{{.number}}.dev.astria.org
