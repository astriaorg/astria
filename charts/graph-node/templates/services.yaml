---
apiVersion: v1
kind: Service
metadata:
  name: graph-node
  namespace: {{ .Values.global.namespaceOverride | default .Release.Namespace }}
spec:
  selector:
    app: graph-node
  ports:
    - name: http
      port: {{ .Values.graphNode.ports.http | default 8000 }}
      targetPort: {{ .Values.graphNode.ports.http | default 8000 }}
    - name: json-rpc
      port: {{ .Values.graphNode.ports.jsonRpc | default 8001 }}
      targetPort: {{ .Values.graphNode.ports.jsonRpc | default 8001 }}
    - name: index-node
      port: {{ .Values.graphNode.ports.indexNode | default 8020 }}
      targetPort: {{ .Values.graphNode.ports.indexNode | default 8020 }}
    - name: metrics
      port: {{ .Values.graphNode.ports.metrics | default 8030 }}
      targetPort: {{ .Values.graphNode.ports.metrics | default 8030 }}
    - name: subgraph-metrics
      port: {{ .Values.graphNode.ports.subgraphMetrics | default 8040 }}
      targetPort: {{ .Values.graphNode.ports.subgraphMetrics | default 8040 }}

---
apiVersion: v1
kind: Service
metadata:
  name: ipfs
  namespace: {{ .Values.global.namespaceOverride | default .Release.Namespace }}
spec:
  selector:
    app: ipfs
  ports:
    - name: api
      port: {{ .Values.ipfs.ports.api | default 5001 }}
      targetPort: {{ .Values.ipfs.ports.api | default 5001 }}

---
apiVersion: v1
kind: Service
metadata:
  name: postgres
  namespace: {{ .Values.global.namespaceOverride | default .Release.Namespace }}
spec:
  selector:
    app: postgres
  ports:
    - name: postgres
      port: {{ .Values.postgres.ports.postgres | default 5432 }}
      targetPort: {{ .Values.postgres.ports.postgres | default 5432 }}
