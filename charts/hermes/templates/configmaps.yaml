apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "hermes.fullname" . }}-config
  namespace: {{ include "hermes.namespace" . }}
data:
  config.toml: |
  {{- tpl (.Files.Get "files/config.toml") $ | nindent 4 }}
---
{{- if not .Values.secretProvider.enabled }}
{{- range $chainId, $chain := .Values.chains }}
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "hermes.fullname" $ }}-{{$chainId}}-key
  namespace: {{ include "hermes.namespace" $ }}
data:
  {{ $chain.key.name }}.json: |
  {{- toPrettyJson $chain.key.devContent | nindent 4 }}
---
{{- end }}
{{- end }}
