global:
  namespaceOverride: ""
  replicaCount: 1
  # Whether to use tty readable logging for astria services, when false use json.
  useTTY: true
  dev: false

images:
  bridgeSigner:
    repo: ghcr.io/astriaorg/bridge-signer
    pullPolicy: IfNotPresent
    tag: local
    devTag: local

config:
  signerName: "signer-1"
  logLevel: "debug"
  evmRpcEndpoint: "http://astria-evm-service.astria-dev-cluster.svc.cluster.local:8545"
  privateKey:
    devContent:
      header:
        version: 0
        ciphersuite: "FROST-ED25519-SHA512-v1"
      identifier: "0100000000000000000000000000000000000000000000000000000000000000"
      signing_share: "4b45de055567d7a2027bfc9a2463de4aaa6f2df995180e638dc938013e9bf70e"
      verifying_share: "bd209bd0c47806fee2db29bde0b705f6a191602f0307e8d959d74f189ae92e9e"
      verifying_key: "ecbe5e2fbaaf23f14ca43f34d71ad733c57afcadeb5782809af48a3da17b9b69"
      min_signers: 1
    secret:
      filename: "key.hex"
      resourceName: "projects/$PROJECT_ID/secrets/sequencerPrivateKey/versions/latest"

otel:
  enabled: false
  serviceName: "bridge-signer"
  endpoint: ""
  tracesEndpoint: ""
  tracesCompression: "gzip"
  tracesTimeout: "10"
  otlpHeaders: ""
  traceHeaders: ""

metrics:
  enabled: false

serviceMonitor:
  # set to enable port svc and service monitor
  enabled: false
  port: 6060
  additionalLabels:
    release: kube-prometheus-stack

alerting: # TODO: fix this
  enabled: false
  interval: ""
  additionalLabels:
    release: kube-prometheus-stack
  annotations: {}
  # scrapeTimeout: 10s
  # path: /metrics
  prometheusRule:
    enabled: true
    additionalLabels:
      release: kube-prometheus-stack
    namespace: monitoring
    rules:
    - alert: Composer_Node_Down
      expr: up{container="composer"} == 0  # Insert your query Expression
      for: 1m  # Rough number but should be enough to init warn
      labels:
        severity: warning
      annotations:
        summary: Composer is Down (instance {{ $labels.instance }})
        description: "composer node '{{ $labels.namespace }}' has disappeared from Prometheus target discovery.\n  VALUE = {{ $value }}\n  LABELS = {{ $labels }}"

# When deploying in a production environment should use a secret provider
# This is configured for use with GCP, need to set own resource names
# and keys
secretProvider:
  enabled: false
  provider: gcp
  parametersTemplate: |-
    secrets: |
      - resourceName: {{ .key.resourceName }}
        fileName: "{{ .key.filename }}"

resources:
  requests:
    cpu: 100m
    memory: 100Mi
  limits:
    cpu: 1000m
    memory: 1Gi

# Default service ports
ports:
  grpc: 9001
  metrics: 9000
